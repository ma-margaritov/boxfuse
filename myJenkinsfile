#!/usr/bin/env groovy
pipeline
{
  agent { 
         dockerfile 
         {
          filename 'myDockerfile'
          dir '/home/ubuntu/boxfuse'
         }
        }
    stages
  {
    stage('Copy source')
    {
      steps { git 'https://github.com/ma-margaritov/boxfuse.git' }
    }
    stage('Build war')
    {
      steps { sh 'mvn package' }
    }
    stage('Make docker image')
        {
      steps { sh 'docker build --tag=boxfuse' }
          // && docker push'
    }
   }
}
