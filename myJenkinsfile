#!/usr/bin/env groovy
pipeline 
{
  agent { dockerfile true } 
// In order to use this option, the Jenkinsfile must be loaded from either a Multibranch Pipeline or a Pipeline from SCM
  {
    stage('Copy source')
	{
      steps
	  {
        git 'https://github.com/ma-margaritov/boxfuse.git'
      }
    }
    stage('Build war')
	{
      steps { sh 'mvn package' }
    }
    stage('Make docker image')
	{
      steps { sh 'docker build --tag=boxfuse' }
	  // && docker push'
    }
}
}
